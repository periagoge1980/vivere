<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to the Vivere Project</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background-color: #007BFF;
      color: white;
      padding: 5px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
      text-align: left;
    }
    .container {
      flex: 1;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
      width: 100%;
    }
    nav {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }
    .links a {
      margin: 5px 10px;
      text-decoration: none;
      color: white;
      background-color: #007BFF;
      padding: 10px 20px;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    .links a:hover {
      background-color: #0056b3;
    }
    .login {
      text-align: center;
    }
    .login button {
      background-color: #007BFF;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
      max-width: 200px;
    }
    .login button:hover {
      background-color: #0056b3;
    }
    footer {
      background-color: #f1f1f1;
      padding: 10px;
      text-align: center;
    }
    @media (min-width: 600px) {
      header h1 {
        font-size: 2rem;
      }
      .login button {
        width: auto;
      }
    }
    .message {
      color: red;
      margin-top: 10px;
    }
    .blurb {
      margin-bottom: 20px;
      text-align: left;
      font-size: 1rem;
    }
    .blurb p {
      margin-bottom: 10px;
    }
    .note {
      font-size: 0.8rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome to the Vivere Project</h1>
    <div class="login">
      <button id="login">Login/Signup</button>
    </div>
  </header>
  <div class="container">
    <div class="blurb">
      <p>Welcome to The Vivere Project. Our mission is to provide comprehensive online resources for individuals struggling with various forms of addiction. We understand the challenges and the courage it takes to seek help and make a change.</p>
      <p>This project is born out of personal experience and a deep desire to give back to the community. As someone who has faced addiction firsthand, I know the journey to recovery is not easy. This site is a small contribution to help others find their path to a healthier, addiction-free life.</p>
      <p>The Vivere Project is entirely free to use. We believe that support should be accessible to everyone without financial barriers.</p>
      <p class="note">*Note: While the information found on the 'Resources' page is currently focused on Quebec, the rest of the site is designed to be useful to everyone, regardless of location. We are dedicated to expanding our resources to include more regions in the future.*</p>
    </div>
    <nav>
      <div class="links">
        <a href="index.html">Home</a>
        <a href="resources.html">Resources</a>
        <a href="#" id="myPlanLink">My Plan</a>
      </div>
    </nav>
    <div id="message" class="message" style="display: none;">Please log in to access this member-only feature.</div>
  </div>
  <footer>
    &copy; 2024 The Vivere Project. All rights reserved.
  </footer>

  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script>
    const loginButton = document.getElementById('login');
    const myPlanLink = document.getElementById('myPlanLink');
    const message = document.getElementById('message');

    netlifyIdentity.on('init', user => {
      if (!user) {
        // Uncomment the line below if you want to open the login modal automatically when there's no user
        // netlifyIdentity.open();
      }
    });

    netlifyIdentity.init();

    loginButton.addEventListener('click', () => {
      netlifyIdentity.open();
    });

    netlifyIdentity.on('login', user => {
      console.log('User logged in:', user);
      netlifyIdentity.close();
    });

    netlifyIdentity.on('logout', () => {
      console.log('User logged out');
    });

    myPlanLink.addEventListener('click', (e) => {
      const user = netlifyIdentity.currentUser();
      if (!user) {
        e.preventDefault();
        message.style.display = 'block';
        setTimeout(() => {
          message.style.display = 'none';
        }, 3000);
      } else {
        window.location.href = 'myplan.html';
      }
    });
  </script>
</body>
</html>
