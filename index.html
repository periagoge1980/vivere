<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to the Vivere Project</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background-color: #007BFF;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
      flex: 1 100%;
      text-align: center;
    }
    .container {
      flex: 1;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
      width: 100%;
    }
    .logo {
      display: block;
      margin: 20px auto;
      max-width: 100px;
    }
    .blurb-box {
      border: 1px solid #ddd;
      padding: 20px;
      margin: 20px 0;
      box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
      background-color: white;
    }
    nav {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }
    .links a {
      margin: 5px 10px;
      text-decoration: none;
      color: white;
      background-color: #007BFF;
      padding: 10px 20px;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    .links a:hover {
      background-color: #0056b3;
    }
    .login {
      text-align: center;
      margin-top: 10px;
    }
    .login button {
      background-color: #007BFF;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
      max-width: 200px;
    }
    .login button:hover {
      background-color: #0056b3;
    }
    footer {
      background-color: #f1f1f1;
      padding: 10px;
      text-align: center;
    }
    .note {
      font-size: 0.8rem;
      color: #555;
    }
    @media (min-width: 600px) {
      header h1 {
        font-size: 2rem;
        flex: 0;
        text-align: left;
      }
      .login {
        margin: 0;
      }
      .login button {
        width: auto;
      }
    }
    .message {
      color: red;
      margin-top: 10px;
    }
    .lang-switch {
      margin-top: 10px;
    }
    .lang-switch button {
      margin: 0 5px;
      padding: 5px 10px;
      cursor: pointer;
      border: none;
      background-color: #007BFF;
      color: white;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    .lang-switch button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome to the Vivere Project</h1>
    <div class="login">
      <button id="login">Login/Signup</button>
    </div>
  </header>
  <div class="container">
    <img src="logo.webp" alt="The Vivere Project Logo" class="logo">
    <div class="blurb-box" id="blurb">
      Welcome to The Vivere Project: Dedicated to providing diverse online resources to people suffering from addiction of different types. I decided to create this site as a small way for me to contribute to the community, as I am myself dealing with addiction tendencies and know how hard it is to break free. The site is entirely free, but please consider supporting it via the Patreon link below to help cover operational costs and support its continuous growth.
      <p class="note">*Note: While the information found on the 'Resources' page is currently focused on Quebec, the rest of the site is designed to be useful to everyone, regardless of location. We are committed to expanding our resources to include more regions in the future.*</p>
    </div>
    <div class="lang-switch">
      <button id="lang-en">English</button>
      <button id="lang-fr">Français</button>
    </div>
    <nav>
      <div class="links">
        <a href="index.html">Home</a>
        <a href="resources.html">Resources</a>
        <a href="#" id="myPlanLink">My Plan</a>
      </div>
    </nav>
    <div id="message" class="message" style="display: none;">Please log in to access this member-only feature.</div>
  </div>
  <footer>
    &copy; 2024 The Vivere Project. All rights reserved.
  </footer>

  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script>
    const loginButton = document.getElementById('login');
    const myPlanLink = document.getElementById('myPlanLink');
    const message = document.getElementById('message');
    const blurbElement = document.getElementById('blurb');

    const translations = {
      en: {
        blurb: `
          Welcome to The Vivere Project: Dedicated to providing diverse online resources to people suffering from addiction of different types. I decided to create this site as a small way for me to contribute to the community, as I am myself dealing with addiction tendencies and know how hard it is to break free. The site is entirely free, but please consider supporting it via the Patreon link below to help cover operational costs and support its continuous growth.
          <p class="note">*Note: While the information found on the 'Resources' page is currently focused on Quebec, the rest of the site is designed to be useful to everyone, regardless of location. We are committed to expanding our resources to include more regions in the future.*</p>
        `
      },
      fr: {
        blurb: `
          Bienvenue sur The Vivere Project : Dédié à fournir des ressources en ligne diversifiées aux personnes souffrant de différents types de dépendances. J'ai décidé de créer ce site comme une petite contribution à la communauté, car je lutte moi-même contre les tendances à la dépendance et je sais à quel point il est difficile de s'en libérer. Le site est entièrement gratuit.
          <p class="note">*Remarque : Bien que les informations trouvées sur la page 'Resources' soient actuellement axées sur le Québec, le reste du site est conçu pour être utile à tout le monde, quel que soit l'emplacement. Nous nous engageons à élargir nos ressources pour inclure plus de régions à l'avenir.*</p>
        `
      }
    };

    const setLanguage = (lang) => {
      if (translations[lang]) {
        blurbElement.innerHTML = translations[lang].blurb;
      }
    };

    document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
    document.getElementById('lang-fr').addEventListener('click', () => setLanguage('fr'));

    netlifyIdentity.on('init', user => {
      if (!user) {
        // Uncomment the line below if you want to open the login modal automatically when there's no user
        // netlifyIdentity.open();
      }
    });

    netlifyIdentity.init();

    loginButton.addEventListener('click', () => {
      netlifyIdentity.open();
    });

    netlifyIdentity.on('login', user => {
      console.log('User logged in:', user);
      netlifyIdentity.close();
    });

    netlifyIdentity.on('logout', () => {
      console.log('User logged out');
    });

    myPlanLink.addEventListener('click', (e) => {
      const user = netlifyIdentity.currentUser();
      if (!user) {
        e.preventDefault();
        message.style.display = 'block';
        setTimeout(() => {
          message.style.display = 'none';
        }, 3000);
      } else {
        window.location.href = 'myplan.html';
      }
    });

    // Set default language
    setLanguage('fr');
  </script>
</body>
</html>
