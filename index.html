<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">Bienvenue sur Le Projet Vivere</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background-color: #007BFF;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
      text-align: left;
    }
    .container {
      flex: 1;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
      width: 100%;
    }
    .blurb-box {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin: 20px 0;
    }
    nav {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }
    .links a {
      margin: 5px 10px;
      text-decoration: none;
      color: white;
      background-color: #007BFF;
      padding: 10px 20px;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    .links a:hover {
      background-color: #0056b3;
    }
    .login {
      display: flex;
      align-items: center;
    }
    .login button {
      background-color: #007BFF;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
      max-width: 200px;
      margin-right: 10px;
    }
    .login button:hover {
      background-color: #0056b3;
    }
    .lang-switch {
      display: flex;
      align-items: center;
    }
    .lang-switch button {
      margin: 0 5px;
      padding: 5px 10px;
      cursor: pointer;
      border: none;
      background-color: #007BFF;
      color: white;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    .lang-switch button:hover {
      background-color: #0056b3;
    }
    footer {
      background-color: #f1f1f1;
      padding: 10px;
      text-align: center;
    }
    .message {
      color: red;
      margin-top: 10px;
    }
    .blurb {
      text-align: left;
      font-size: 1rem;
    }
    .blurb p {
      margin-bottom: 10px;
    }
    .note {
      font-size: 0.8rem;
    }
    .patreon {
      text-align: center;
      margin-top: 20px;
    }
    .patreon a {
      display: inline-block;
      padding: 10px 20px;
      background-color: #f96854;
      color: white;
      border-radius: 5px;
      text-decoration: none;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }
    .patreon a:hover {
      background-color: #c65042;
    }
    .logo {
      margin: 20px auto;
      text-align: center;
    }
    .logo img {
      max-width: 200px;
    }
  </style>
</head>
<body>
  <header>
    <h1 id="header-title">Bienvenue sur Le Projet Vivere</h1>
    <div class="login">
      <button id="login">Connexion/Inscription</button>
      <div class="lang-switch">
        <button id="lang-en">EN</button>
        <button id="lang-fr">FR</button>
      </div>
    </div>
  </header>
  <div class="container">
    <div class="logo">
      <img src="logo.webp" alt="Vivere Project Logo">
    </div>
    <div class="blurb-box">
      <div class="blurb" id="blurb">
        <p>Bienvenue sur Le Projet Vivere. Notre mission est de fournir des ressources en ligne complètes pour les personnes confrontées à divers types de dépendances. Nous comprenons les défis et le courage qu'il faut pour demander de l'aide et changer.</p>
        <p>Le Projet Vivere est entièrement gratuit à utiliser. Nous croyons que le soutien doit être accessible à tous sans barrières financières.</p>       
      </div>
    </div>
    <nav>
      <div class="links">
        <a href="index.html">Accueil</a>
        <a href="resources.html">Ressources</a>
        <a href="#" id="myPlanLink">Mon Plan</a>
        <a href="blog.html">Blog</a>
      </div>
    </nav>
    <div id="message" class="message" style="display: none;">Veuillez vous connecter pour accéder à cette fonctionnalité réservée aux membres.</div>
    <div class="patreon">
      <a href="https://www.patreon.com/thevivereproject" target="_blank">Soutenez-nous sur Patreon</a>
    </div>
  </div>
  <footer>
    &copy; 2024 Projet Vivere. Tous droits réservés.
  </footer>

  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script>
    const loginButton = document.getElementById('login');
    const myPlanLink = document.getElementById('myPlanLink');
    const message = document.getElementById('message');
    const blurbElement = document.getElementById('blurb');
    const pageTitle = document.getElementById('page-title');
    const headerTitle = document.getElementById('header-title');

    const translations = {
      en: {
        title: 'Welcome to the Vivere Project',
        header: 'Welcome to the Vivere Project',
        blurb: `
          <p>Welcome to The Vivere Project. Our mission is to provide comprehensive online resources for individuals struggling with various forms of addiction. We understand the challenges and the courage it takes to seek help and make a change.</p>
          <p>The Vivere Project is entirely free to use. We believe that support should be accessible to everyone without financial barriers.</p>
        `
      },
      fr: {
        title: 'Bienvenue sur Le Projet Vivere',
        header: 'Bienvenue sur Le Projet Vivere',
        blurb: `
          <p>Bienvenue sur Le Projet Vivere. Notre mission est de fournir des ressources en ligne complètes pour les personnes confrontées à divers types de dépendances. Nous comprenons les défis et le courage qu'il faut pour demander de l'aide et changer.</p>
          <p>Le Projet Vivere est entièrement gratuit à utiliser. Nous croyons que le soutien doit être accessible à tous sans barrières financières.</p>       
        `
      }
    };

    const setLanguage = (lang) => {
      if (translations[lang]) {
        blurbElement.innerHTML = translations[lang].blurb;
        pageTitle.textContent = translations[lang].title;
        headerTitle.textContent = translations[lang].header;
      }
    };

    document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
    document.getElementById('lang-fr').addEventListener('click', () => setLanguage('fr'));

    netlifyIdentity.on('init', user => {
      if (!user) {
        // Uncomment the line below if you want to open the login modal automatically when there's no user
        // netlifyIdentity.open();
      }
    });

    netlifyIdentity.init();

    loginButton.addEventListener('click', () => {
      netlifyIdentity.open();
    });

    netlifyIdentity.on('login', user => {
      console.log('Utilisateur connecté:', user);
      netlifyIdentity.close();
    });

    netlifyIdentity.on('logout', () => {
      console.log('Utilisateur déconnecté');
    });

    myPlanLink.addEventListener('click', (e) => {
      const user = netlifyIdentity.currentUser();
      if (!user) {
        e.preventDefault();
        message.style.display = 'block';
        setTimeout(() => {
          message.style.display = 'none';
        }, 3000);
      } else {
        window.location.href = 'myplan.html';
      }
    });

    // Set default language
    setLanguage('fr');      
  </script>
    <!-- Supabase Initialization Script -->
  <script src="/path/to/supabase-init.js"></script>
</body>
</html>
